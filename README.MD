# ğŸ§  AI Memory Extraction + Personality Engine  
A modular AI system that:

1. **Analyzes the last 30 user messages** to extract  
   - stable preferences  
   - long-term facts  
   - emotional patterns  
2. **Stores memory in MongoDB** with confidence-based reinforcement  
3. **Transforms assistant replies** into custom personalities  
   (calm mentor, witty friend, therapist, confident coach)

- This project showcases **memory systems**, **reasoning**, **prompt design**, **API architecture**, and **personality-controlled responses** â€” core skills for Companion-AI systems.

---

## â­ Features

### âœ… Memory Extraction (LLM-powered)
- Extracts stable long-term user patterns  
- Avoids single-message noise  
- Ensures JSON correctness via Pydantic  
- Structured reasoning + strong prompt design  

### âœ… Memory Store with Confidence Tracking
- Uses MongoDB  
- Stores memory **only if repeated multiple times**  
- Prevents hallucinated or unstable memory  
- Keeps `history_counts` to track confidence  

### âœ… Personality Engine
Transforms replies into specific personas:
- ğŸ§˜ **Calm Mentor**
- ğŸ˜„ **Witty Friend**
- ğŸ©º **Therapist**
- ğŸ’ª **Confident Coach**

Each personality includes:
- Description  
- Tone rules  
- Expression style  
- Constraints for stable voice consistency  

### âœ… FastAPI Backend
Exposes two major APIs:
- `/extract-memory`
- `/transform-reply`

Clean, modular, production-friendly.

---

## ğŸ“‚ Project Structure
```
assignment/
â”‚
â”œâ”€â”€ api.py                   # FastAPI server entrypoint
â”œâ”€â”€ memory_extractor.py      # LLM-based memory extraction
â”œâ”€â”€ memory_store.py          # MongoDB persistence + merge logic
â”œâ”€â”€ personality_engine.py    # Tone transformation engine
â”œâ”€â”€ .env                     # API keys (not included)
â””â”€â”€ requirements.txt
```

### ğŸš€ How It Works
### 1. Memory Extraction Pipeline
```
User Messages (30) â†’ extract_personality() â†’ LLM Output (JSON)
             â†“
       merge_memory()
             â†“
     Stored in MongoDB
```

- The extractor retrieves:

 - "preferences"

 - "facts"

 - "emotions"

- with strong constraints like:

 - No hallucinations

 - Only repeated traits

 - Must match stable long-term info


### 2. Personality Transformation
- Assistant Reply â†’ rewrite via Gemini â†’ New Tone Applied


- Each personality has explicit:

- Tone

- Speech rules

- Allowed expressions

- Forbidden patterns (e.g., â€œdonâ€™t add explanationsâ€)


### ğŸ”Œ API Endpoints

- POST /extract-memory

- Extracts memory and updates the DB.
- Request
```
{
  "user_id": "user123",
  "messages": [
    "I love hiking.",
    "I usually go hiking on weekends.",
    "I'm working as a graphic designer."
  ]
}
````
- Response
```
{
  "status": "success",
  "memory": {
    "user_id": "user123",
    "preferences": ["hiking"],
    "facts": ["works as a graphic designer"],
    "emotions": [],
    "history_counts": { ... }
  }
}
```
- POST /transform-reply

- Rewrite a message into a selected personality.

- Request
```
{
  "base_reply": "You should try taking breaks during your work.",
  "personality": "calm_mentor"
}
```
- Response
```
{
  "before": "You should try taking breaks during your work.",
  "after": "Take a moment to step away now and then. It helps your mind settle.",
  "personality": "calm_mentor"
}
```

### test the application here
- Deployed on Render
- https://personality-ai-2.onrender.com/docs
